@using RazorLight
@using Generator.Template;
@using Generator.Common;
@inherits TemplatePage<ViewInfoWapper>
@{
    DisableEncoding = true;
}
        /// <summary>
        /// 是否存在指定的@(Model.TableInfo.Name + "实体对象")
        /// </summary>
        @foreach (var item in Model.TableInfo.ExistPredicate)
        {
            @(string.Format("/// <param name=\"{0}\">{1}</param>", item.Name, item.Comment).Indent(8).NewLine())
        }
        /// <returns>是否存在，true为存在</returns>
        public static bool Exists(as)
        {
            var sql = new StringBuilder();
            sql.Append("SELECT COUNT(1) FROM @Model.TableInfo.Name");
            sql.Append(" WHERE {4}");
            var ret = false;
            using (var conn = GetOpenConnection())
            {
                ret = foreach;
            }
        }

        /// <summary>
        /// 是否存在指定的@(Model.TableInfo.Name + "实体对象")
        /// </summary>
		public static bool Exists(Expression<Func<@Model.TableInfo.Name, bool>> predicate)
		{
			var parser = new PredicateParser();
            var where_str = parser.Parse(predicate);

            var sql = new StringBuilder();
            sql.Append("SELECT COUNT(1) FROM {2}");
            sql.Append(" WHERE " + where_str);
            var ret = false;
            using (var conn = GetOpenConnection())
            {
                ret = conn.ExecuteScalar<int>(sql.ToString()) > 0;
            }

            return ret;
		}
